linux: = import("os/linux")

exit: proc(code: u8) = do linux.exit(i64(code))

time: proc() -> i64 =
{
  timeval: linux.timeval_t
  linux.gettimeofday(^timeval)
  return timeval.seconds * 1000000 + timeval.micro_seconds
}

// TODO allow the use of memory_allocator here
heap: proc(size: i64) -> ^byte =
  do return linux.mmap(nil, size, linux.PROT_READ | linux.PROT_WRITE, linux.MAP_PRIVATE | linux.MAP_ANONYMOUS, -1, 0)
